<apex:page controller="OcdlaSavedPaymentMethodsController">
    <apex:form id="paymentForm">
        <apex:outputPanel rendered="{!IF(paymentProfiles.size != 0, true, false)}">
            <apex:pageBlock>
                <apex:commandLink action="{!redirectToAddPaymentMethod}" value="Add Payment Method" />
            </apex:pageBlock>
            <apex:pageBlock title="Saved Payment Methods">
                <apex:pageBlockTable value="{!paymentProfiles}" var="profile">
                    <apex:column headerValue="Name">
                        {!profile.billTo.firstName & ' ' & profile.billTo.lastName}
                    </apex:column>
                    <apex:column value="{!profile.payment.creditCard.cardNumber}" headerValue="Card Number" />
                    <apex:column value="{!profile.payment.creditCard.expirationDate}" headerValue="Expiration Date" />
                    <apex:column>
                        <apex:commandLink value="Edit" action="{!redirectToEditPaymentMethod}">
                            <apex:param name="paymentProfileId" value="{!profile.customerPaymentProfileId}" assignTo="{!selectedPaymentProfileId}" />
                        </apex:commandLink>
                    </apex:column>
                    <apex:column>
                        <apex:commandLink value="Delete" action="{!deletePaymentProfile}" rerender="pageBlock">
                            <apex:param name="paymentProfileId" value="{!profile.customerPaymentProfileId}" assignTo="{!selectedPaymentProfileId}" />
                        </apex:commandLink>
                    </apex:column>
                    <apex:column>
                        Test setDefault
                        <!-- <apex:commandLink value="Set Default" action="{!setDefaultPaymentProfile}" rerender="pageBlock">
                            <apex:param name="profileId" value="{!profile.Id}" />
                        </apex:commandLink> -->
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlock>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(paymentProfiles.size == 0, true, false)}">
            <apex:pageBlock>
                <apex:commandLink action="{!redirectToAddPaymentMethod}" value="Add Payment Method" styleClass="addPaymentMethodLink"/>
            </apex:pageBlock>
        </apex:outputPanel>
    </apex:form>
</apex:page>